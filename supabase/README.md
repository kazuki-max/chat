# アカウント完全削除機能のセットアップ

## 必須：SQLの実行

**Supabase Dashboard > SQL Editor** で以下の内容を実行してください：

```sql
-- ファイル: supabase/setup_delete_account.sql の内容をコピー＆ペースト
```

このSQLは `delete_user_completely()` 関数を作成します。この関数は：
- 友達関係、友達申請、メッセージ、チャットメンバーシップ、プロフィールを削除
- **auth.users テーブルからも削除**（再ログイン不可に）

## 動作確認

1. SQLを実行後、アプリで退会を実行
2. 同じメールアドレスでログインを試みる → **ログインできなければ成功**

## トラブルシューティング

SQLが失敗する場合、以下を確認：
- Supabaseプロジェクトの所有者権限があるか
- SQL Editorで直接実行しているか
